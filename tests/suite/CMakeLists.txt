set(PROJECT_TEST_SUITE_DIR ${PROJECT_TESTS_DIR}/suite)

execute_process(
  COMMAND ${PROJECT_TEST_SUITE_DIR}/gen-test.py
  WORKING_DIRECTORY ${PROJECT_TEST_SUITE_DIR}/good
)

add_custom_target(check-functional
  COMMAND ${PROJECT_TEST_SUITE_DIR}/test.py ${PROJECT_TEST_SUITE_DIR}
  DEPENDS nolimix86
  WORKING_DIRECTORY ${PROJECT_BINARY_DIR}
)
